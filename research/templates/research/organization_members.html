{% extends 'base.html' %}
{% block title %}Organization Members | Strain DB{% endblock %}
{% block header_title %}Organization Members{% endblock %}

{% block content %}
<div class="grid gap-6 lg:grid-cols-2">
  <section class="rounded-xl border border-slate-700 bg-card-bg p-6">
    <h2 class="mb-3 text-xl font-bold">{{ organization.name }} Members</h2>
    <div class="space-y-2">
      {% for membership in memberships %}
        <div class="rounded border border-slate-700 bg-slate-900/50 px-3 py-2 text-sm">
          <span class="font-medium">{{ membership.user.username }}</span>
          <span class="ml-2 text-slate-400">{{ membership.get_role_display }}</span>
        </div>
      {% endfor %}
    </div>
  </section>
  <section class="rounded-xl border border-slate-700 bg-card-bg p-6">
    <h3 class="mb-3 text-lg font-semibold">Add / Invite Member</h3>
    <form method="post" class="space-y-3">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="rounded bg-primary px-4 py-2 font-semibold text-black">Save Member</button>
    </form>
  </section>
</div>

<section class="mt-6 rounded-xl border border-slate-700 bg-card-bg p-6">
  <h3 class="mb-3 text-lg font-semibold">Data Management</h3>
  <p class="mb-4 text-sm text-slate-400">Export or restore a full organization snapshot.</p>
  <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
    <a href="{% url 'organization-export' org_id=organization.uuid %}" class="inline-flex rounded bg-primary px-4 py-2 font-semibold text-black">
      Export Snapshot
    </a>
    <form method="post" enctype="multipart/form-data" action="{% url 'organization-restore' org_id=organization.uuid %}" class="flex flex-col gap-2 md:flex-row md:items-end">
      {% csrf_token %}
      {{ snapshot_restore_form.snapshot_file }}
      <button type="submit" class="rounded border border-amber-400 px-4 py-2 font-semibold text-amber-300">Restore Snapshot</button>
    </form>
  </div>
</section>
{% endblock %}
