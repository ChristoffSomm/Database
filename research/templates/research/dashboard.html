{% extends 'base.html' %}

{% block title %}Dashboard | Strain DB{% endblock %}
{% block header_title %}Research Dashboard{% endblock %}

{% block content %}
<section class="mb-6">
  <h2 class="text-2xl font-bold text-slate-100">Overview{% if current_database %} â€” {{ current_database.name }}{% endif %}</h2>
  <p class="mt-2 text-sm text-slate-400">Database-scoped status and recent activity.</p>
</section>

<section class="mt-6 flex flex-wrap gap-3">
  {% if can_edit %}
    <a href="{% url 'strain-create' %}" class="rounded-md bg-primary px-4 py-2 text-sm font-semibold text-black transition hover:bg-green-300">Add Strain</a>
  {% endif %}
  {% if can_manage_members %}
    <a href="{% url 'membership-list' %}" class="rounded-md border border-primary/70 bg-primary/10 px-4 py-2 text-sm font-semibold text-primary transition hover:bg-primary/20">Manage Members</a>
  {% endif %}
</section>

<section class="grid grid-cols-1 gap-5 sm:grid-cols-2 xl:grid-cols-3">
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Total Strains</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ strain_count }}</p>
  </article>
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Organisms</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ organism_count }}</p>
  </article>
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Plasmids</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ plasmid_count }}</p>
  </article>
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Pending</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ pending_count }}</p>
  </article>
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Approved</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ approved_count }}</p>
  </article>
  <article class="rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
    <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Archived</h3>
    <p class="mt-2 text-3xl font-bold text-primary">{{ archived_count }}</p>
  </article>
</section>

<section class="mt-8 rounded-xl border border-slate-700 bg-card-bg p-5 shadow-lg shadow-black/20">
  <h3 class="text-sm font-semibold uppercase tracking-wide text-slate-300">Most Active Organisms</h3>
  <ul class="mt-3 space-y-2 text-slate-200">
    {% for organism in recent_organisms %}
      <li class="flex justify-between border-b border-slate-700 pb-2">
        <span>{{ organism.name }}</span>
        <span>{{ organism.total }} strains</span>
      </li>
    {% empty %}
      <li>No organisms found in this database.</li>
    {% endfor %}
  </ul>
</section>
{% endblock %}
